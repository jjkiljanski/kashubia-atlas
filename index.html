<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Atlas Językowy Kaszubszczyzny</title>

  <!-- Google font 'Inter' -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- Your styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Top bar with title -->
  <header id="top-bar">
    <h1>Atlas Językowy Kaszubszczyzny (Wybrane Mapy)</h1>
  </header>

  <!-- Main content wrapper -->
  <div id="content-wrapper">
    <!-- Sidebar with dropdown and map author -->
    <aside id="sidebar">
      <label for="map-select" id="map-label">Wybierz mapę:</label>
      <select id="map-select"></select>

      <label for="map-author" id="author-label">Autor:</label>
      <div id="map-author"></div>

      <!-- New Buttons -->
      <button id="load-map-button">Załaduj mapę</button>
      <button id="new-map-button">Stwórz nową mapę</button>
    </aside>

    <!-- Map container -->
    <main id="map-container">
      <div id="map"></div>
      <div id="legend"></div>
    </main>
  </div>

  <!-- Modal Popup -->
  <div id="load-map-modal">
    <div id="load-map-modal-content">
      <span id="close-modal">&times;</span>
      <h3>Załaduj dane mapy</h3>

      <br />

      <label>Definicja stylu mapy w formacie JSON:</label>
      <input type="file" id="json-file" accept=".json" />

      <br />

      <label>CSV z danymi:</label>
      <input type="file" id="csv-file" accept=".csv" />

      <br />

      <div style="text-align: right; margin-top: 20px;">
        <button id="submit-load">Załaduj</button>
      </div>
    </div>
  </div>

  <!-- Leaflet and other scripts -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js"></script>
  <script src="https://unpkg.com/leaflet.pattern/dist/leaflet.pattern.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.pattern/leaflet.pattern.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <script type="module" src="app.js"></script>

  <!-- Modal logic -->
  <script>
    const modal = document.getElementById("load-map-modal");
    const openBtn = document.getElementById("load-map-button");
    const closeBtn = document.getElementById("close-modal");

    openBtn.onclick = () => modal.style.display = "block";
    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = (e) => {
      if (e.target === modal) modal.style.display = "none";
    };
  </script>
</body>
</html>